---
import '../styles/globals.css';
import 'katex/dist/katex.min.css';
import Preloads from './Preloads.astro';
import { linkTitles } from '../modules/titles';

interface Props {
  title: string;
  url: string;
  description?: string;
}

const { title, url } = Astro.props;
const index = linkTitles.findIndex(([k]) => k === url);
const prev = index > 0 ? linkTitles.at(index - 1) : undefined;
const next =
  index >= 0 && index < linkTitles.length - 1
    ? linkTitles.at(index + 1)
    : undefined;
---

<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width,initial-scale=1' />
    <meta name='generator' content={Astro.generator} />

    <!-- preloads -->
    <Preloads />

    <!-- font-face -->
    <link
      rel='stylesheet'
      href='https://api.tktb-tess.dev/fonts/Inter/font-face.css'
      crossorigin='anonymous'
    />
    <link
      rel='stylesheet'
      href='https://api.tktb-tess.dev/fonts/Charis/font-face.css'
      crossorigin='anonymous'
    />

    <link rel='icon' href='/icon.svg' type='image/svg+xml' />
    <title>{title}</title>
  </head>
  <body>
    <div id='md-root'>
      <header
        class='flex flex-col gap-2 px-4 my-8 *:my-0 [&_a]:font-normal'
      >
        <p class='text-center text-2xl font-light'>C L L</p>
        <div
          class='flex max-lg:flex-col max-lg:items-center lg:flex-row lg:justify-center lg:gap-4'
        >
          {prev && <a class="max-lg:pe-8" href={prev[0]}>&lt;- {prev[1]}</a>}
          {next && <a class="max-lg:ps-8" href={next[0]}>{next[1]} -&gt;</a>}
        </div>
        <p class='text-center'><a href='/'>Table of Contents</a></p>
        <p class='text-center'>
          <a href='https://mw.lojban.org/papri/The_Complete_Lojban_Language'>
            Book Info Page
          </a>
        </p>
      </header>
      <main>
        <h1 id='title'>
          {title}
        </h1>
        <slot />
      </main>
    </div>
  </body>
</html>
