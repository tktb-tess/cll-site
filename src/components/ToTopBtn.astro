---
interface Props {}
---

<button id='to-top-btn' type='button' title='Scroll to top'>
  <div class='__arrow'></div>
</button>

<script>
  const toTopBtn = document.getElementById('to-top-btn');

  if (!(toTopBtn instanceof HTMLButtonElement)) {
    throw Error('Fail to get element', { cause: { toTopBtn } });
  }

  toTopBtn.addEventListener('click', (ev) => {
    ev.preventDefault();
    window.scroll({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', () => {
    const vis = window.scrollY > 600 ? '' : undefined;
    if (toTopBtn.dataset.visible !== vis) {
      if (vis === '') {
        toTopBtn.dataset.visible = '';
      } else {
        delete toTopBtn.dataset.visible;
      }
    }
  });
</script>

<style lang="postcss">
  @reference '../styles/globals.css';
  
  #to-top-btn {
    @apply hidden fixed right-5 bottom-5
    place-content-center p-0.5 rounded size-10
    cbg-accent opacity-0 any-hover:cbg-accent-hover
    transition-[background-color,opacity,display]
    allow-discrete duration-200;

    &[data-visible] {
      @apply grid opacity-100;

      @starting-style {
        @apply opacity-0;
      }
    }

    .__arrow {
      @apply size-2 border-l-2 border-t-2 cborder-text-inv;
      transform: translateY(calc(var(--spacing) * 0.6)) rotateZ(45deg);
    }
  }
</style>
